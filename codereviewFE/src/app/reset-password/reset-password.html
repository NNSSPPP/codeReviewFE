<div class="reset-container">
  <div class="reset-box">
    <!-- LEFT -->
    <div class="reset-left">
      <h1>Hello, Reset your Password!</h1>
      <p>PCCTH Automate Code Review.</p>
    </div>

    <!-- ไม่มี token -->
    <div *ngIf="!token" class="reset-right token-error">
      <h2>Can't reset your password</h2>
      <p>We could not find a valid token in your link. Please check your email and try again.</p>
      <button class="go-back-btn" (click)="goBack()">Go Back</button>
    </div>

    <!-- มี token -->
    <div *ngIf="token" class="reset-right">
      <h2>Reset Password</h2>

      <form [formGroup]="form" (ngSubmit)="submit()">
        <!-- New Password -->
        <div class="input-group">
          <label for="newPassword">New password</label>
          <input
            type="password"
            formControlName="newPassword"
            placeholder="New password"
            [class.is-invalid]="form.get('newPassword')?.invalid && form.get('newPassword')?.touched"
          />

          <div *ngIf="form.get('newPassword')?.touched || form.get('newPassword')?.dirty">
            <small *ngIf="form.get('newPassword')?.errors?.['required']" class="error-message">
              Password is required
            </small>
            <small *ngIf="form.get('newPassword')?.errors?.['minlength']" class="error-message">
              Password must be at least 8 characters
            </small>
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="input-group">
          <label for="confirmPassword">Confirm password</label>
          <input
            type="password"
            formControlName="confirmPassword"
            placeholder="Confirm password"
            [class.is-invalid]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched"
          />

          <div *ngIf="form.get('confirmPassword')?.touched || form.get('confirmPassword')?.dirty">
            <small *ngIf="form.get('confirmPassword')?.errors?.['required']" class="error-message">
              Confirm password is required
            </small>
            <small *ngIf="form.errors?.['mismatch']" class="error-message">
              Passwords do not match
            </small>
          </div>
        </div>

        <button type="submit" [disabled]="loading">Confirm</button>
      </form>
    </div>
  </div>
</div>
